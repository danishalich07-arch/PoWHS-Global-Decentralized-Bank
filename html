<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PoWHS$ Protocol | UIP07 Sovereign Node</title>
    <style>
        body { background: #0a0a0a; color: #00ff00; font-family: 'Courier New', monospace; padding: 20px; text-align: center; }
        .box { border: 1px solid #00ff00; padding: 20px; margin: 20px auto; max-width: 600px; box-shadow: 0 0 15px #00ff00; }
        .btn { background: #00ff00; color: #000; border: none; padding: 10px 20px; cursor: pointer; font-weight: bold; margin-top: 10px; border-radius: 5px; }
        .status { color: #00ffff; font-size: 0.9em; letter-spacing: 2px; }
        #addressDisplay { word-break: break-all; color: #ffcc00; font-weight: bold; }
        .balance-tag { color: #fff; font-size: 1.5em; }
        .info { font-size: 0.8em; color: #888; margin-top: 10px; }
    </style>
</head>
<body>

    <h1>UIP07 GLOBAL HUB</h1>
    <p class="status">NETWORK: SOVEREIGN | PROTOCOL: ACTIVE</p>

    <div class="box">
        <h3>Sovereign Master Vault</h3>
        <p id="masterAddr" style="font-size: 0.8em;">Connecting to Chain...</p>
        <div class="balance-tag"><span id="balance">0</span> PoWHS$</div>
        <p class="info">Reserved Supply for Global Stability</p>
    </div>

    <div class="box" id="shadowSection">
        <h3>UIP07 Birth Reward Engine</h3>
        <p>Generate native address to receive 10 PoWHS$ instantly.</p>
        <button class="btn" onclick="generateNativeWallet()">Generate Native Wallet</button>
        <div id="newShadowDisplay" style="margin-top:20px;"></div>
    </div>

    <div style="margin-top: 30px; font-size: 0.7em; color: #555;">
        Genius Pool: <span id="geniusPool">1</span> PoWHS$ Available
    </div>

    <script src="uip07-core.js"></script>
    <script>
        // 1. Fetch data from chain.json and update UI
        async function loadChain() {
            try {
                const response = await fetch('chain.json');
                const data = await response.json();
                
                // Set Master Balance (2,999,999)
                document.getElementById('masterAddr').innerText = data.ledger.main_vault_address;
                document.getElementById('balance').innerText = parseInt(data.ledger.main_vault_balance).toLocaleString();
                
                // Set Genius Pool (1)
                document.getElementById('geniusPool').innerText = data.ledger.genius_reward_reserve;
            } catch (err) {
                console.error("Chain Data Sync Failed", err);
                document.getElementById('masterAddr').innerText = "Syncing with UIP07 Peer...";
            }
        }

        // 2. Native Wallet & Birth Reward Logic (Starting from 3rd Address)
        function generateNativeWallet() {
            // Generating unique identity
            const entropy = Math.random().toString(36).substring(2) + Date.now();
            const uipAddress = "UIP07_" + btoa(entropy).substring(0, 32);
            
            // Core Engine se reward process karwana
            const result = UIP07_CORE.processNewAddress(uipAddress);
            
            if(result.status === "Success") {
                document.getElementById('newShadowDisplay').innerHTML = `
                    <div style="border-top: 1px dashed #00ff00; padding-top: 10px;">
                        <p style="color:white;">Native UIP07 Address Created:</p>
                        <p id="addressDisplay">${uipAddress}</p>
                        <h2 style="color:#00ff00;">+ ${result.amount} PoWHS$ Credited</h2>
                        <small style="color:yellow;">Intelligence Shadow: VERIFIED</small>
                        <p class="info">This address is now live on the global hub.</p>
                    </div>
                `;
            }
        }

        window.onload = loadChain;
    </script>
</body>
</html>
